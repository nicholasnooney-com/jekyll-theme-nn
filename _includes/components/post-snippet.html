{% comment %}
This template expects the following variables to be defined when including it:
  - post: A reference to the Jekyll post variable.
{% endcomment %}

<article class="media">
    <div class="media-content">
        {% if include.post.featured-image %}
        <div class="columns">
            <div class="column is-one-quarter">
                {% include components/featured-image.html
                        post=include.post %}
            </div>
            <div class="column">
        {% endif %}
                <div class="content">
                    <div class="level">
                        <div class="level-left">
                            <div class="level-item">
                                <div class="wrapper">
                                    <p class="title is-4">
                                        <a href="{{ post.url | relative_url }}">
                                            {{ post.title | escape }}
                                        </a>
                                    </p>
                                    <p class="subtitle is-6">
                                        {{ post.date | date: "%b %-d, %Y" }}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="level-right">
                            <div class="level-item">
                                <div class="tags">
                                    {% for category in post.categories %}
                                    {% assign cat_page = category | slugify | append: ".html" %}
                                    <a href="{{ cat_page | prepend: "/category/" | relative_url }}" class="tag is-info">
                                        {{ category | escape }}
                                    </a>
                                    {% endfor %}
                                    {% for tag in post.tags %}
                                    {% assign tag_page = tag | slugify | append: ".html" %}
                                    <a href="{{ tag_page | prepend: "/tags/" | relative_url }}" class="tag is-light">
                                        {{ tag | escape }}
                                    </a>
                                    {% if forloop.index > 3 %}
                                        {% break %}
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="post-excerpt">
                        {{ post.excerpt }}
                    </div>
                </div>
        {% if include.post.featured-image %}
            </div>
        </div>
        {% endif %}
    </div>
</article>
